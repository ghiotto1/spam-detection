<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Defines a chess board structure and functions for board initialization, manipulation, and state evaluation.

# Purpose
This code defines a C header file for managing a chess board state. It provides structures and functions to initialize, manipulate, and evaluate chess board configurations. The `board` structure is central to this file, representing a chess board with an array of `piece` elements, the current player's turn, castling rights, en passant target square, half-move clock, and move number. The file includes functions to create and initialize a board, either from scratch or from a Forsyth-Edwards Notation (FEN) string, which is a standard notation for describing a particular board position.

The file also provides functions to set and get pieces on the board, generate possible moves, and check various board states such as whether a square is attacked, if a player is in check, or if there is insufficient material to continue the game. Additionally, it includes functions to play moves on the board, compare two board states, and convert a board state back to a FEN string. The header file imports other components from the `chesslib` library, indicating that it is part of a larger chess application. The constants defined, such as `CASTLE_WK`, `CASTLE_WQ`, `CASTLE_BK`, and `CASTLE_BQ`, are used to manage castling rights within the board state.
# Imports and Dependencies

---
- `chesslib/square.h`
- `chesslib/piece.h`
- `chesslib/movelist.h`


# Data Structures

---
### board
- **Type**: ``struct``
- **Members**:
    - `pieces`: An array of 64 `piece` elements representing the chess pieces on the board.
    - `currentPlayer`: A `pieceColor` indicating the current player's turn.
    - `castleState`: A `uint8_t` bitmask that describes the castling rights.
    - `epTarget`: A `sq` representing the en passant target square.
    - `halfMoveClock`: An `unsigned int` tracking the number of half-moves since the last capture or pawn move.
    - `moveNumber`: An `unsigned int` indicating the current move number in the game.
- **Description**: Represents a chess board state, including the positions of pieces, the current player, castling rights, en passant target, and move counters.


# Function Declarations (Public API)

---
### boardCreate<!-- {{#callable_declaration:boardCreate}} -->
[View Source →](<../../../../../chesslib/include/chesslib/board.h#L31>)

Allocates and initializes a chess board to the starting position.
- **Description**: Use this function to create a new chess board initialized to the standard starting position. The function allocates memory for the board structure and returns a pointer to it. The caller is responsible for freeing the allocated memory when it is no longer needed. This function is useful for setting up a new game of chess with the initial configuration of pieces.
- **Inputs**: None
- **Output**: Returns a pointer to a newly allocated `board` structure initialized to the starting position, or `NULL` if allocation fails.
- **See Also**: [`boardCreate`](<../../src/chesslib/board.c.md#boardcreate>)  (Implementation)


---
### boardCreateFromFen<!-- {{#callable_declaration:boardCreateFromFen}} -->
[View Source →](<../../../../../chesslib/include/chesslib/board.h#L32>)

Allocates and initializes a chess board from a FEN string.
- **Description**: Use this function to create a new chess board initialized to a specific position described by a FEN (Forsyth-Edwards Notation) string. This function allocates memory for a new `board` structure and attempts to initialize it using the provided FEN string. If the initialization fails, the function returns `NULL`, and the allocated memory is freed. Ensure to free the returned `board` pointer when it is no longer needed to avoid memory leaks.
- **Inputs**:
    - `fen`: A null-terminated string containing the FEN representation of the chess board position. The string must be valid and correctly formatted according to FEN standards. If the string is invalid, the function returns `NULL`.
- **Output**: A pointer to a newly allocated `board` structure initialized to the position described by the FEN string, or `NULL` if initialization fails.
- **See Also**: [`boardCreateFromFen`](<../../src/chesslib/board.c.md#boardcreatefromfen>)  (Implementation)


---
### boardInitInPlace<!-- {{#callable_declaration:boardInitInPlace}} -->
[View Source →](<../../../../../chesslib/include/chesslib/board.h#L35>)

Initializes a chess board to the standard starting position.
- **Description**: Use this function to set up a chess board to the standard initial position. This function modifies the provided `board` structure directly. It is important to ensure that the `board` pointer is valid and points to a properly allocated `board` structure before calling this function. This function does not return a value, and it assumes that the `board` structure is already allocated and ready for initialization.
- **Inputs**:
    - `b`: A pointer to a `board` structure that must be allocated before calling this function. The function modifies this structure to represent the initial chess position. The pointer must not be null, and the caller retains ownership of the memory.
- **Output**: None
- **See Also**: [`boardInitInPlace`](<../../src/chesslib/board.c.md#boardinitinplace>)  (Implementation)


---
### boardInitFromFenInPlace<!-- {{#callable_declaration:boardInitFromFenInPlace}} -->
[View Source →](<../../../../../chesslib/include/chesslib/board.h#L36>)

Initializes a chess board from a FEN string.
- **Description**: Use this function to set up a chess board with a specific position described by a FEN (Forsyth-Edwards Notation) string. This function modifies the provided `board` structure in place. It returns 0 on success and 1 on failure, with error messages printed to standard error for invalid FEN strings. Ensure the `board` is allocated and valid before calling this function. The FEN string must be correctly formatted, as the function performs limited error checking.
- **Inputs**:
    - `b`: A pointer to a `board` structure that will be initialized. Must not be null and must point to a valid, allocated `board`.
    - `fen`: A pointer to a null-terminated string containing the FEN representation of the chess position. Must not be null and must be correctly formatted.
- **Output**: Returns 0 if the board is successfully initialized from the FEN string, or 1 if an error occurs due to an invalid FEN string.
- **See Also**: [`boardInitFromFenInPlace`](<../../src/chesslib/board.c.md#boardinitfromfeninplace>)  (Implementation)


---
### boardSetPiece<!-- {{#callable_declaration:boardSetPiece}} -->
[View Source →](<../../../../../chesslib/include/chesslib/board.h#L38>)

Sets a piece on a specified square of the board.
- **Description**: Use this function to place a chess piece on a specific square of the board. This function modifies the board by setting the given piece at the specified square. Ensure that the board is properly initialized before calling this function. The function does not perform any validation on the square or piece, so the caller must ensure that the square is valid and the piece is appropriate for the game state.
- **Inputs**:
    - `b`: A pointer to a `board` structure where the piece will be set. Must not be null and must point to a valid, initialized board.
    - `s`: A `sq` value representing the square on the board where the piece will be placed. The caller must ensure this is a valid square index.
    - `p`: A `piece` value representing the chess piece to place on the board. The caller must ensure this is a valid piece for the game.
- **Output**: None
- **See Also**: [`boardSetPiece`](<../../src/chesslib/board.c.md#boardsetpiece>)  (Implementation)


---
### boardGetPiece<!-- {{#callable_declaration:boardGetPiece}} -->
[View Source →](<../../../../../chesslib/include/chesslib/board.h#L39>)

Retrieves the piece located at a specified square on the board.
- **Description**: Use this function to get the piece that is currently located at a specific square on a chess board. This function is useful when you need to check the state of a particular square, such as determining if it is occupied and by which piece. Ensure that the board is properly initialized before calling this function to avoid undefined behavior.
- **Inputs**:
    - `b`: A pointer to a `board` structure. This must not be null and should point to a valid, initialized board.
    - `s`: A `sq` type representing the square on the board. It must be a valid square index within the board's boundaries.
- **Output**: Returns the `piece` located at the specified square on the board.
- **See Also**: [`boardGetPiece`](<../../src/chesslib/board.c.md#boardgetpiece>)  (Implementation)


---
### boardGenerateMoves<!-- {{#callable_declaration:boardGenerateMoves}} -->
[View Source →](<../../../../../chesslib/include/chesslib/board.h#L41>)

Generates all legal moves for the current player on the board.
- **Description**: Use this function to obtain a list of all possible legal moves for the current player on a given chess board. It considers the current state of the board, including the positions of all pieces and the castling rights. The function excludes moves that would place the current player's king in check. Ensure that the board is properly initialized before calling this function. The caller is responsible for freeing the returned move list to avoid memory leaks.
- **Inputs**:
    - `b`: A pointer to a `board` structure representing the current state of the chess game. The board must be initialized and must not be null. The function does not modify the board.
- **Output**: A pointer to a `moveList` containing all legal moves for the current player. The list is dynamically allocated and must be freed by the caller. Returns an empty list if no legal moves are available.
- **See Also**: [`boardGenerateMoves`](<../../src/chesslib/board.c.md#boardgeneratemoves>)  (Implementation)


---
### boardIsSquareAttacked<!-- {{#callable_declaration:boardIsSquareAttacked}} -->
[View Source →](<../../../../../chesslib/include/chesslib/board.h#L43>)

Checks if a square is attacked by a specified color.
- **Description**: Use this function to determine if a specific square on the chess board is under attack by any piece of a given color. This function is useful for evaluating board positions and making strategic decisions in a chess game. Ensure that the board is properly initialized before calling this function. The function iterates over all pieces of the specified color and checks if any can move to the target square. It returns a non-zero value if the square is attacked, and zero if it is not.
- **Inputs**:
    - `b`: A pointer to a `board` structure representing the current state of the chess board. Must not be null. The caller retains ownership.
    - `s`: The target square to check for attacks. Must be a valid square on the board.
    - `attacker`: The color of the pieces to check for attacks. Must be a valid `pieceColor` value.
- **Output**: Returns a non-zero value if the square is attacked by the specified color, and zero if it is not.
- **See Also**: [`boardIsSquareAttacked`](<../../src/chesslib/board.c.md#boardissquareattacked>)  (Implementation)


---
### boardIsInCheck<!-- {{#callable_declaration:boardIsInCheck}} -->
[View Source →](<../../../../../chesslib/include/chesslib/board.h#L44>)

Checks if the current player is in check.
- **Description**: Use this function to determine if the current player on the given chess board is in check. This function is useful in scenarios where you need to validate the safety of the current player's king. It must be called with a valid `board` pointer that represents the current state of the chess game. Ensure that the board is properly initialized before calling this function to avoid undefined behavior.
- **Inputs**:
    - `b`: A pointer to a `board` structure representing the current state of the chess game. Must not be null. The board should be properly initialized before use.
- **Output**: Returns a non-zero value if the current player is in check, otherwise returns zero.
- **See Also**: [`boardIsInCheck`](<../../src/chesslib/board.c.md#boardisincheck>)  (Implementation)


---
### boardIsPlayerInCheck<!-- {{#callable_declaration:boardIsPlayerInCheck}} -->
[View Source →](<../../../../../chesslib/include/chesslib/board.h#L45>)

Checks if a player's king is in check on the board.
- **Description**: Use this function to determine if the specified player's king is currently in check on the given chess board. This function is useful for validating game states and ensuring that moves do not leave the player's king in check. It requires a valid board and a player color as inputs. The function does not modify the board or any other state.
- **Inputs**:
    - `b`: A pointer to a `board` structure representing the current state of the chess game. Must not be null.
    - `player`: The color of the player to check, specified as a `pieceColor` value. Valid values are `pcWhite` or `pcBlack`.
- **Output**: Returns 1 if the player's king is in check, otherwise returns 0.
- **See Also**: [`boardIsPlayerInCheck`](<../../src/chesslib/board.c.md#boardisplayerincheck>)  (Implementation)


---
### boardIsInsufficientMaterial<!-- {{#callable_declaration:boardIsInsufficientMaterial}} -->
[View Source →](<../../../../../chesslib/include/chesslib/board.h#L47>)

Checks if a chess board has insufficient material to win.
- **Description**: Use this function to determine if a chess board position has insufficient material for either player to win, which typically results in a draw. This function checks for scenarios such as only kings remaining, or kings with a single minor piece like a knight or bishop. It assumes a standard chess board setup and does not handle non-standard cases like multiple kings. Call this function when you need to verify if the current board state can lead to a win or is a guaranteed draw due to lack of material.
- **Inputs**:
    - `b`: A pointer to a `board` structure representing the current state of the chess game. Must not be null. The function does not modify the board.
- **Output**: Returns 1 if the board has insufficient material to win, otherwise returns 0.
- **See Also**: [`boardIsInsufficientMaterial`](<../../src/chesslib/board.c.md#boardisinsufficientmaterial>)  (Implementation)


---
### boardPlayMove<!-- {{#callable_declaration:boardPlayMove}} -->
[View Source →](<../../../../../chesslib/include/chesslib/board.h#L50>)

Returns a new board with the specified move applied.
- **Description**: Use this function to create a new board state by applying a move to an existing board. It allocates memory for a new board, copies the current board state, and applies the move to the new board. This function is useful when you need to preserve the original board state while exploring possible moves. Ensure to free the returned board when it is no longer needed to avoid memory leaks.
- **Inputs**:
    - `b`: A pointer to the current board from which to create a new board with the move applied. Must not be null.
    - `m`: The move to apply to the board. Must be a valid move for the current board state.
- **Output**: A pointer to a new board with the move applied. The caller is responsible for freeing this board.
- **See Also**: [`boardPlayMove`](<../../src/chesslib/board.c.md#boardplaymove>)  (Implementation)


---
### boardPlayMoveInPlace<!-- {{#callable_declaration:boardPlayMoveInPlace}} -->
[View Source →](<../../../../../chesslib/include/chesslib/board.h#L52>)

Executes a move on a chess board, updating its state.
- **Description**: Use this function to apply a move to a chess board, updating the board's state to reflect the move. This includes updating the move number, half-move clock, castling rights, en passant target square, and switching the current player. The function must be called with a valid `board` pointer and a valid `move`. It modifies the board in place, so ensure that the board is correctly initialized before calling this function. The function does not return a value, and it assumes that the move is legal and valid within the context of the current board state.
- **Inputs**:
    - `b`: A pointer to a `board` structure representing the current state of the chess game. Must not be null. The function modifies this board in place.
    - `m`: A `move` structure representing the move to be played. Must be a valid move within the context of the current board state.
- **Output**: None
- **See Also**: [`boardPlayMoveInPlace`](<../../src/chesslib/board.c.md#boardplaymoveinplace>)  (Implementation)


---
### boardEq<!-- {{#callable_declaration:boardEq}} -->
[View Source →](<../../../../../chesslib/include/chesslib/board.h#L55>)

Checks if two chess boards are equal in all aspects.
- **Description**: Use this function to determine if two `board` structures represent the same chess position, including all game state details. This function compares the current player, castle state, en passant target square, half-move clock, move number, and the arrangement of pieces on the board. It returns a non-zero value if all these aspects are identical, and zero if any differ. Ensure that both `board` pointers are valid and initialized before calling this function.
- **Inputs**:
    - `b1`: A pointer to the first `board` structure to compare. Must not be null and must be initialized.
    - `b2`: A pointer to the second `board` structure to compare. Must not be null and must be initialized.
- **Output**: Returns 1 if the boards are equal in all aspects, otherwise returns 0.
- **See Also**: [`boardEq`](<../../src/chesslib/board.c.md#boardeq>)  (Implementation)


---
### boardEqContext<!-- {{#callable_declaration:boardEqContext}} -->
[View Source →](<../../../../../chesslib/include/chesslib/board.h#L57>)

Compares two chess boards for equality, ignoring counters and filtering en passant target squares.
- **Description**: Use this function to determine if two chess boards are equal in terms of player turn, castle state, and piece positions, while ignoring move counters and filtering en passant target squares. This function is useful when you need to compare boards for equality without considering the full game state, such as when checking for draw conditions or repeated positions. Ensure that both board pointers are valid and initialized before calling this function. The function returns a non-zero value if the boards are considered equal under these conditions, and zero otherwise.
- **Inputs**:
    - `b1`: A pointer to the first board to compare. Must not be null and must point to a valid, initialized board structure.
    - `b2`: A pointer to the second board to compare. Must not be null and must point to a valid, initialized board structure.
- **Output**: Returns a non-zero value if the boards are equal in the specified context, or zero if they are not.
- **See Also**: [`boardEqContext`](<../../src/chesslib/board.c.md#boardeqcontext>)  (Implementation)


---
### boardGetFen<!-- {{#callable_declaration:boardGetFen}} -->
[View Source →](<../../../../../chesslib/include/chesslib/board.h#L59>)

Converts a chess board state to a FEN string.
- **Description**: Use this function to obtain a FEN (Forsyth-Edwards Notation) string that represents the current state of a chess board. This function is useful for saving the board state or for interoperability with other chess software that uses FEN. The function allocates memory for the returned string, so the caller is responsible for freeing this memory to avoid memory leaks. Ensure that the input board is properly initialized before calling this function.
- **Inputs**:
    - `b`: A pointer to a `board` structure representing the current state of the chess game. Must not be null. The board should be initialized and contain valid game state information.
- **Output**: A pointer to a dynamically allocated string containing the FEN representation of the board. The caller must free this string after use.
- **See Also**: [`boardGetFen`](<../../src/chesslib/board.c.md#boardgetfen>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)