<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Functions for creating and manipulating chessboard squares using file and rank or SAN notation.

# Purpose
This code provides functionality for handling chessboard squares within a chess library. It defines several functions to create and manipulate chessboard squares, which are represented by the `sq` data type. The functions include [`sqI`](<#sqi>) for creating a square from file and rank integers, [`sqS`](<#sqs>) for creating a square from a Standard Algebraic Notation (SAN) string, and [`sqIndex`](<#sqindex>) for creating a square from an index. The code also includes utility functions such as [`sqGetIndex`](<#sqgetindex>) to retrieve the index of a square, [`sqGetStr`](<#sqgetstr>) to get the SAN string representation of a square, [`sqIsDark`](<#sqisdark>) to determine if a square is dark-colored, and [`sqEq`](<#sqeq>) to check if two squares are equal.

The code includes a constant array `SQ_STRS` that holds the SAN string representations of all 64 squares on a chessboard. The functions ensure that the input values are within valid ranges for a standard 8x8 chessboard, returning `SQ_INVALID` for invalid inputs. This code is part of a broader chess library, as indicated by the inclusion of the header file `chesslib/square.h`, and it provides a focused set of operations related to chessboard square management.
# Imports and Dependencies

---
- `chesslib/square.h`


# Global Variables

---
### SQ\_STRS
- **Type**: `const char *[64]`
- **Description**: An array of 64 constant character pointers, each representing a square on a chessboard in standard algebraic notation (SAN). The array elements are strings like 'a1', 'b1', ..., 'h8', corresponding to the squares on a chessboard from the bottom-left to the top-right.
- **Use**: Used to map an index to its corresponding chessboard square in SAN format.


# Functions

---
### sqI<!-- {{#callable:sqI}} -->
[View Source →](<../../../../../chesslib/src/chesslib/square.c#L9>)

Creates a chessboard square from given file and rank values.
- **Inputs**:
    - `file`: The file of the square, represented as an integer from 1 to 8.
    - `rank`: The rank of the square, represented as an integer from 1 to 8.
- **Logic and Control Flow**:
    - Check if `file` is less than 1 or greater than 8, or if `rank` is less than 1 or greater than 8.
    - If any of the above conditions are true, return `SQ_INVALID`.
    - Create a variable `s` of type `sq`.
    - Assign `file` to `s.file` and `rank` to `s.rank`.
    - Return the square `s`.
- **Output**: A `sq` structure representing the square, or `SQ_INVALID` if the inputs are out of range.


---
### sqS<!-- {{#callable:sqS}} -->
[View Source →](<../../../../../chesslib/src/chesslib/square.c#L21>)

Converts a string representing a chess square in SAN format to a `sq` structure.
- **Inputs**:
    - `str`: A pointer to a string representing a chess square in SAN format, such as "e4".
- **Logic and Control Flow**:
    - Get the first character of the string `str` and store it in `c1`.
    - Check if `c1` is outside the range 'a' to 'h'; if true, return `SQ_INVALID`.
    - Get the second character of the string `str` and store it in `c2`.
    - Check if `c2` is outside the range '1' to '8'; if true, return `SQ_INVALID`.
    - Create a `sq` structure `s`.
    - Set `s.file` to the integer value of `c1` minus 'a' plus 1.
    - Set `s.rank` to the integer value of `c2` minus '0'.
    - Return the `sq` structure `s`.
- **Output**: A `sq` structure representing the file and rank of the chess square, or `SQ_INVALID` if the input is not valid.


---
### sqIndex<!-- {{#callable:sqIndex}} -->
[View Source →](<../../../../../chesslib/src/chesslib/square.c#L52>)

Converts an index to a chessboard square using a predefined string array.
- **Inputs**:
    - `index`: An unsigned 8-bit integer representing the index of the square, expected to be between 0 and 63.
- **Logic and Control Flow**:
    - Check if `index` is less than 0 or greater than 63.
    - If the check is true, return `SQ_INVALID`.
    - If the check is false, use `index` to access `SQ_STRS` and pass the result to [`sqS`](<#sqs>).
    - Return the result of `sqS(SQ_STRS[index])`.
- **Output**: Returns a `sq` structure representing the chessboard square corresponding to the given index, or `SQ_INVALID` if the index is out of range.
- **Functions Called**:
    - [`sqS`](<#sqs>)


---
### sqGetIndex<!-- {{#callable:sqGetIndex}} -->
[View Source →](<../../../../../chesslib/src/chesslib/square.c#L60>)

Calculates the zero-based index of a chessboard square from its file and rank.
- **Inputs**:
    - `s`: A structure representing a square on a chessboard, with `file` and `rank` attributes.
- **Logic and Control Flow**:
    - Check if `s.file` is less than 1 or greater than 8, or if `s.rank` is less than 1 or greater than 8.
    - If any of the above conditions are true, return -1 to indicate an invalid square.
    - Calculate the index using the formula `(8 * (s.rank - 1)) + (s.file - 1)` and return it.
- **Output**: Returns a `uint8_t` representing the zero-based index of the square, or -1 if the square is invalid.


---
### sqGetStr<!-- {{#callable:sqGetStr}} -->
[View Source →](<../../../../../chesslib/src/chesslib/square.c#L69>)

Retrieves the Standard Algebraic Notation (SAN) string for a given chess square.
- **Inputs**:
    - `s`: A `sq` structure representing a chess square with `file` and `rank` attributes.
- **Logic and Control Flow**:
    - Call [`sqGetIndex`](<#sqgetindex>) with `s` to get the index of the square.
    - Check if the index is greater than 63; if true, return the string '##'.
    - If the index is valid (0 to 63), return the corresponding SAN string from the `SQ_STRS` array.
- **Output**: A constant character pointer to the SAN string of the square, or '##' if the index is invalid.
- **Functions Called**:
    - [`sqGetIndex`](<#sqgetindex>)


---
### sqIsDark<!-- {{#callable:sqIsDark}} -->
[View Source →](<../../../../../chesslib/src/chesslib/square.c#L78>)

Determines if a given chessboard square is dark-colored.
- **Inputs**:
    - `s`: A `sq` structure representing a square on the chessboard, with `rank` and `file` attributes.
- **Logic and Control Flow**:
    - Perform a bitwise AND operation on `s.rank` and 1 to determine if the rank is odd or even.
    - Perform a bitwise AND operation on `s.file` and 1 to determine if the file is odd or even.
    - Use the XOR operation on the results of the two AND operations to check if the rank and file have the same parity.
    - Negate the result of the XOR operation to determine if the square is dark.
- **Output**: Returns `1` if the square is dark-colored, otherwise returns `0`.


---
### sqEq<!-- {{#callable:sqEq}} -->
[View Source →](<../../../../../chesslib/src/chesslib/square.c#L83>)

Compares two chessboard squares for equality, considering invalid squares.
- **Inputs**:
    - `s1`: The first square to compare, represented by a `sq` structure with `file` and `rank` attributes.
    - `s2`: The second square to compare, represented by a `sq` structure with `file` and `rank` attributes.
- **Logic and Control Flow**:
    - Check if `s1` is a valid square by verifying if its `file` and `rank` are within the range 1 to 8; if not, set `s1` to `SQ_INVALID`.
    - Check if `s2` is a valid square by verifying if its `file` and `rank` are within the range 1 to 8; if not, set `s2` to `SQ_INVALID`.
    - Return the result of comparing the `file` and `rank` of `s1` and `s2` for equality.
- **Output**: Returns `1` if both squares are equal, otherwise returns `0`.



---
Made with ❤️ by [Driver](https://www.driver.ai/)