<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Functions for creating and manipulating chessboard squares using file and rank or SAN notation.

# Purpose
This code provides functionality for handling chessboard squares in a chess application. It defines several functions to create and manipulate chessboard squares, which are represented by the `sq` data type. The functions include [`sqI`](<#sqi>) for creating a square from file and rank integers, [`sqS`](<#sqs>) for creating a square from a Standard Algebraic Notation (SAN) string, and [`sqIndex`](<#sqindex>) for creating a square from an index. The code also includes utility functions such as [`sqGetIndex`](<#sqgetindex>) to get the index of a square, [`sqGetStr`](<#sqgetstr>) to get the SAN string representation of a square, [`sqIsDark`](<#sqisdark>) to determine if a square is dark-colored, and [`sqEq`](<#sqeq>) to check if two squares are equal.

The code uses a constant array `SQ_STRS` to store the SAN string representations of all 64 squares on a chessboard. The functions ensure that the input values are within valid ranges for a chessboard, returning `SQ_INVALID` for invalid inputs. This code is part of a larger library, as indicated by the inclusion of the header file `chesslib/square.h`, and it is intended to be used as a utility for managing chessboard squares in a chess application.
# Imports and Dependencies

---
- `chesslib/square.h`


# Global Variables

---
### SQ\_STRS
- **Type**: `const char *[64]`
- **Description**: An array of 64 constant character pointers, each representing a square on a chessboard using standard algebraic notation (SAN). The array elements are strings like 'a1', 'b1', ..., 'h8', which correspond to the squares on a chessboard from the bottom-left to the top-right.
- **Use**: Used to map an index to its corresponding chessboard square in SAN format.


# Functions

---
### sqI<!-- {{#callable:sqI}} -->
[View Source →](<../../../../../chesslib/src/chesslib/square.c#L9>)

Creates a chessboard square from given file and rank values.
- **Inputs**:
    - `file`: An unsigned 8-bit integer representing the file (column) of the square, expected to be between 1 and 8.
    - `rank`: An unsigned 8-bit integer representing the rank (row) of the square, expected to be between 1 and 8.
- **Logic and Control Flow**:
    - Check if `file` is less than 1 or greater than 8, or if `rank` is less than 1 or greater than 8.
    - If any of the above conditions are true, return `SQ_INVALID`.
    - Create a variable `s` of type `sq`.
    - Assign `file` to `s.file` and `rank` to `s.rank`.
    - Return the square `s`.
- **Output**: Returns a `sq` structure representing the square with the specified file and rank, or `SQ_INVALID` if the inputs are out of range.


---
### sqS<!-- {{#callable:sqS}} -->
[View Source →](<../../../../../chesslib/src/chesslib/square.c#L21>)

Converts a string representing a chess square in SAN format to a `sq` structure.
- **Inputs**:
    - `str`: A pointer to a string representing a chess square in SAN format, such as "e4".
- **Logic and Control Flow**:
    - Get the first character `c1` from the input string `str`.
    - Check if `c1` is between 'a' and 'h'; if not, return `SQ_INVALID`.
    - Get the second character `c2` from the input string `str`.
    - Check if `c2` is between '1' and '8'; if not, return `SQ_INVALID`.
    - Create a `sq` structure `s`.
    - Set `s.file` to the numeric value of `c1` by subtracting 'a' and adding 1.
    - Set `s.rank` to the numeric value of `c2` by subtracting '0'.
    - Return the `sq` structure `s`.
- **Output**: A `sq` structure representing the chess square, or `SQ_INVALID` if the input is not valid.


---
### sqIndex<!-- {{#callable:sqIndex}} -->
[View Source →](<../../../../../chesslib/src/chesslib/square.c#L52>)

Converts an index to a chessboard square using a predefined string array.
- **Inputs**:
    - `index`: An unsigned 8-bit integer representing the index of the square, expected to be between 0 and 63.
- **Logic and Control Flow**:
    - Check if `index` is less than 0 or greater than 63.
    - If the check is true, return `SQ_INVALID`.
    - If the check is false, use `index` to access `SQ_STRS` and pass the result to [`sqS`](<#sqs>).
    - Return the result of `sqS(SQ_STRS[index])`.
- **Output**: Returns a `sq` structure representing the square at the given index, or `SQ_INVALID` if the index is out of range.
- **Functions Called**:
    - [`sqS`](<#sqs>)


---
### sqGetIndex<!-- {{#callable:sqGetIndex}} -->
[View Source →](<../../../../../chesslib/src/chesslib/square.c#L60>)

Calculates the zero-based index of a chessboard square from its file and rank.
- **Inputs**:
    - `s`: A structure representing a chessboard square with `file` and `rank` attributes.
- **Logic and Control Flow**:
    - Check if `s.file` is less than 1 or greater than 8, or if `s.rank` is less than 1 or greater than 8.
    - If any of the above conditions are true, return -1 indicating an invalid square.
    - Calculate the index using the formula `(8 * (s.rank - 1)) + (s.file - 1)` and return it.
- **Output**: Returns a `uint8_t` representing the zero-based index of the square, or -1 if the square is invalid.


---
### sqGetStr<!-- {{#callable:sqGetStr}} -->
[View Source →](<../../../../../chesslib/src/chesslib/square.c#L69>)

Retrieves the Standard Algebraic Notation (SAN) string for a given chess square.
- **Inputs**:
    - `s`: A chess square represented by the `sq` type, which contains file and rank information.
- **Logic and Control Flow**:
    - Call [`sqGetIndex`](<#sqgetindex>) with the input `s` to get the index of the square.
    - Check if the index is greater than 63; if true, return the string "##".
    - If the index is valid (0 to 63), return the corresponding SAN string from the `SQ_STRS` array.
- **Output**: A constant character pointer to the SAN string representing the square, or "##" if the index is invalid.
- **Functions Called**:
    - [`sqGetIndex`](<#sqgetindex>)


---
### sqIsDark<!-- {{#callable:sqIsDark}} -->
[View Source →](<../../../../../chesslib/src/chesslib/square.c#L78>)

Determines if a given chessboard square is dark-colored.
- **Inputs**:
    - `s`: A `sq` structure representing a square on the chessboard, with `file` and `rank` attributes.
- **Logic and Control Flow**:
    - Use bitwise AND operation on `s.rank` and `s.file` to check if both are odd or both are even.
    - Use XOR operation to determine if the results of the AND operations are different.
    - Negate the result of the XOR operation to determine if the square is dark.
- **Output**: Returns `1` if the square is dark-colored, otherwise returns `0`.


---
### sqEq<!-- {{#callable:sqEq}} -->
[View Source →](<../../../../../chesslib/src/chesslib/square.c#L83>)

Compares two chessboard squares for equality, marking invalid squares if necessary.
- **Inputs**:
    - `s1`: The first square to compare, represented by a structure with `file` and `rank` attributes.
    - `s2`: The second square to compare, represented by a structure with `file` and `rank` attributes.
- **Logic and Control Flow**:
    - Check if `s1` has a `file` or `rank` outside the valid range (1 to 8); if so, set `s1` to `SQ_INVALID`.
    - Check if `s2` has a `file` or `rank` outside the valid range (1 to 8); if so, set `s2` to `SQ_INVALID`.
    - Return the result of comparing the `file` and `rank` of `s1` and `s2` for equality.
- **Output**: Returns `1` if both squares are equal, otherwise returns `0`.



---
Made with ❤️ by [Driver](https://www.driver.ai/)