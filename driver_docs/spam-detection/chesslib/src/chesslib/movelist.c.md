<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Implements a move list for chess, including creation, addition, retrieval, undo, and UCI string conversion.

# Purpose
This code implements a linked list data structure specifically designed to manage a list of chess moves. The primary components include the `moveList` and `moveListNode` structures, which represent the list and its individual nodes, respectively. The code provides functions to create and manage these structures, such as [`moveListCreate`](<#movelistcreate>) for initializing a new move list, [`moveListNodeCreate`](<#movelistnodecreate>) for creating a new node with a given move, and [`moveListAdd`](<#movelistadd>) for appending a move to the list. The [`moveListGet`](<#movelistget>) function retrieves a move at a specified index, while [`moveListUndo`](<#movelistundo>) removes the last move from the list.

Additionally, the code includes a function [`moveListGetUciString`](<#movelistgetucistring>) that generates a Universal Chess Interface (UCI) formatted string from the list of moves, which is useful for interfacing with chess engines. The [`moveListFree`](<#movelistfree>) function is responsible for deallocating the memory used by the move list and its nodes. This code is intended to be part of a larger chess library, as indicated by the inclusion of the header file `chesslib/movelist.h`, and it provides a focused functionality for handling sequences of chess moves.
# Imports and Dependencies

---
- `stdlib.h`
- `string.h`
- `chesslib/movelist.h`


# Functions

---
### moveListCreate<!-- {{#callable:moveListCreate}} -->
[View Source →](<../../../../../chesslib/src/chesslib/movelist.c#L11>)

Initializes and returns a new `moveList` structure with default values.
- **Inputs**: None
- **Logic and Control Flow**:
    - Allocate memory for a `moveList` structure and assign it to the pointer `list`.
    - Set the `head` pointer of `list` to `NULL`, indicating an empty list.
    - Set the `tail` pointer of `list` to `NULL`, indicating no last element in the list.
    - Initialize the `size` of `list` to 0, indicating the list is empty.
    - Return the pointer `list`.
- **Output**: A pointer to a newly created `moveList` structure.


---
### moveListNodeCreate<!-- {{#callable:moveListNodeCreate}} -->
[View Source →](<../../../../../chesslib/src/chesslib/movelist.c#L22>)

Allocates memory for a new `moveListNode`, initializes it with a given `move`, and sets its `next` pointer to `NULL`.
- **Inputs**:
    - `move`: A `move` structure that contains the data to store in the new node.
- **Logic and Control Flow**:
    - Allocate memory for a new `moveListNode` using `malloc`.
    - Assign the provided `move` to the `move` field of the newly created node.
    - Set the `next` pointer of the node to `NULL`.
    - Return the pointer to the newly created `moveListNode`.
- **Output**: A pointer to the newly created `moveListNode`.


---
### moveListAdd<!-- {{#callable:moveListAdd}} -->
[View Source →](<../../../../../chesslib/src/chesslib/movelist.c#L31>)

Adds a new move to the end of a move list.
- **Inputs**:
    - `list`: A pointer to a `moveList` structure where the new move will be added.
    - `move`: A `move` structure that represents the move to add to the list.
- **Logic and Control Flow**:
    - Create a new `moveListNode` using the provided `move`.
    - Check if the `head` of the list is `NULL`.
    - If the list is empty, set both `head` and `tail` of the list to the new node.
    - If the list is not empty, link the current `tail` node to the new node and update the `tail` to the new node.
    - Increment the `size` of the list by one.
- **Output**: No return value; the function modifies the `moveList` structure in place.
- **Functions Called**:
    - [`moveListNodeCreate`](<#movelistnodecreate>)


---
### moveListGet<!-- {{#callable:moveListGet}} -->
[View Source →](<../../../../../chesslib/src/chesslib/movelist.c#L49>)

Retrieves the move at a specified index from a linked list of moves.
- **Inputs**:
    - `list`: A pointer to a `moveList` structure, which is a linked list of moves.
    - `index`: An unsigned integer representing the position of the move to retrieve from the list.
- **Logic and Control Flow**:
    - Initialize `currNode` to the head of the list.
    - Iterate through the list until the specified `index` is zero, updating `currNode` to the next node and decrementing `index` in each iteration.
    - Return the `move` stored in the `currNode`.
- **Output**: Returns the `move` at the specified `index` in the `moveList`.


---
### moveListUndo<!-- {{#callable:moveListUndo}} -->
[View Source →](<../../../../../chesslib/src/chesslib/movelist.c#L60>)

Removes the last node from a singly linked list of moves and updates the list's size and tail pointer.
- **Inputs**:
    - `list`: A pointer to a `moveList` structure, which represents a singly linked list of moves.
- **Logic and Control Flow**:
    - Check if `list` is `NULL` or if `list->head` is `NULL`; if so, return immediately.
    - If the list has only one node, free the head node and set both `head` and `tail` to `NULL`.
    - If the list has more than one node, traverse the list to find the last node and its predecessor.
    - Free the last node, set the predecessor's `next` pointer to `NULL`, and update the `tail` pointer to the predecessor.
    - Decrease the `size` of the list by one.
- **Output**: No return value; the function modifies the `moveList` structure in place.


---
### moveListGetUciString<!-- {{#callable:moveListGetUciString}} -->
[View Source →](<../../../../../chesslib/src/chesslib/movelist.c#L92>)

Converts a `moveList` into a UCI (Universal Chess Interface) formatted string.
- **Inputs**:
    - `list`: A pointer to a `moveList` structure that contains the moves to convert into a UCI string.
- **Logic and Control Flow**:
    - Check if the `list` is empty; if true, allocate a single character for the string, set it to null, and return it.
    - If the `list` contains one move, convert that move to a UCI string using [`moveGetUci`](<move.c.md#movegetuci>) and return it.
    - Calculate the required string size as 5 times the number of moves, accounting for spaces and a null terminator.
    - Iterate through the `moveList` to add extra space for promotion characters if present.
    - Allocate memory for the UCI string based on the calculated size.
    - Iterate through the `moveList`, convert each move to a UCI string, append it to the result string, and add a space after each move.
    - Replace the last space with a null terminator to properly terminate the string.
    - Return the constructed UCI string.
- **Output**: A dynamically allocated string representing the moves in UCI format, which must be freed by the caller.
- **Functions Called**:
    - [`moveGetUci`](<move.c.md#movegetuci>)


---
### moveListFree<!-- {{#callable:moveListFree}} -->
[View Source →](<../../../../../chesslib/src/chesslib/movelist.c#L141>)

Deallocates memory for a `moveList` and all its nodes.
- **Inputs**:
    - `list`: A pointer to a `moveList` structure that contains the list of moves to free.
- **Logic and Control Flow**:
    - Initialize `node` to the head of the list.
    - Enter a loop that continues while `node` is not NULL.
    - Inside the loop, store the next node in `next`, free the current `node`, and then update `node` to `next`.
    - After the loop, free the `list` itself.
- **Output**: No return value; the function frees the memory allocated for the `moveList` and its nodes.



---
Made with ❤️ by [Driver](https://www.driver.ai/)