<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Implements a move list for chess, including creation, addition, retrieval, undo, and UCI string conversion.

# Purpose
The code implements a linked list data structure specifically designed to manage a list of chess moves. It provides functions to create and manipulate a `moveList`, which is a collection of `moveListNode` elements, each representing a single chess move. The primary operations include creating a new move list with [`moveListCreate`](<#movelistcreate>), adding a move to the list with [`moveListAdd`](<#movelistadd>), retrieving a move by index with [`moveListGet`](<#movelistget>), and removing the last move with [`moveListUndo`](<#movelistundo>). The code also includes a function [`moveListGetUciString`](<#movelistgetucistring>) to convert the list of moves into a Universal Chess Interface (UCI) formatted string, which is commonly used in chess engines for move representation.

The code is part of a larger chess library, as indicated by the inclusion of the header file `chesslib/movelist.h`. It defines a public API for managing move lists, which can be used by other parts of the chess application. The [`moveListFree`](<#movelistfree>) function is provided to deallocate memory used by the move list, ensuring proper resource management. The implementation uses a singly linked list, which is evident from the use of `next` pointers in `moveListNode` and the absence of backward traversal capabilities.
# Imports and Dependencies

---
- `stdlib.h`
- `string.h`
- `chesslib/movelist.h`


# Functions

---
### moveListCreate<!-- {{#callable:moveListCreate}} -->
[View Source →](<../../../../../chesslib/src/chesslib/movelist.c#L11>)

Allocates and initializes a new `moveList` structure.
- **Inputs**: None
- **Logic and Control Flow**:
    - Allocate memory for a `moveList` structure using `malloc`.
    - Set the `head` pointer of the list to `NULL`.
    - Set the `tail` pointer of the list to `NULL`.
    - Initialize the `size` of the list to 0.
    - Return the pointer to the newly created `moveList`.
- **Output**: A pointer to the newly created `moveList` structure.


---
### moveListNodeCreate<!-- {{#callable:moveListNodeCreate}} -->
[View Source →](<../../../../../chesslib/src/chesslib/movelist.c#L22>)

Allocates memory for a new `moveListNode`, initializes it with a given `move`, and sets its `next` pointer to `NULL`.
- **Inputs**:
    - `move`: A `move` structure that contains the data to store in the new node.
- **Logic and Control Flow**:
    - Allocate memory for a `moveListNode` and assign it to the pointer `node`.
    - Assign the input `move` to the `move` field of the `node`.
    - Set the `next` pointer of the `node` to `NULL`.
    - Return the pointer `node`.
- **Output**: A pointer to the newly created `moveListNode`.


---
### moveListAdd<!-- {{#callable:moveListAdd}} -->
[View Source →](<../../../../../chesslib/src/chesslib/movelist.c#L31>)

Adds a new move to the end of a move list.
- **Inputs**:
    - `list`: A pointer to a `moveList` structure where the new move will be added.
    - `move`: A `move` structure that represents the move to add to the list.
- **Logic and Control Flow**:
    - Create a new `moveListNode` using the provided `move`.
    - Check if the `head` of the list is `NULL`.
    - If the list is empty, set both `head` and `tail` of the list to the new node.
    - If the list is not empty, set the `next` pointer of the current `tail` to the new node and update the `tail` to the new node.
    - Increment the `size` of the list by 1.
- **Output**: No return value; the function modifies the `moveList` structure in place.
- **Functions Called**:
    - [`moveListNodeCreate`](<#movelistnodecreate>)


---
### moveListGet<!-- {{#callable:moveListGet}} -->
[View Source →](<../../../../../chesslib/src/chesslib/movelist.c#L49>)

Retrieves the move at a specified index from a linked list of moves.
- **Inputs**:
    - `list`: A pointer to a `moveList` structure, which is a linked list of moves.
    - `index`: An unsigned integer representing the position of the move to retrieve from the list.
- **Logic and Control Flow**:
    - Initialize `currNode` to the head of the list.
    - Iterate through the list, moving to the next node and decrementing `index` until `index` is zero.
    - Return the move stored in the current node.
- **Output**: The move at the specified index in the list.


---
### moveListUndo<!-- {{#callable:moveListUndo}} -->
[View Source →](<../../../../../chesslib/src/chesslib/movelist.c#L60>)

Removes the last node from a singly linked list of moves, effectively undoing the last move.
- **Inputs**:
    - `list`: A pointer to a `moveList` structure, which represents a singly linked list of moves.
- **Logic and Control Flow**:
    - Check if the `list` is `NULL` or if the `list`'s `head` is `NULL`; if so, return immediately as there is nothing to undo.
    - If the `list` contains only one node, free the `head` node and set both `head` and `tail` to `NULL`.
    - If the `list` contains more than one node, traverse the list to find the last node and its predecessor.
    - Free the last node, set the predecessor's `next` pointer to `NULL`, and update the `tail` to point to the predecessor.
    - Decrement the `size` of the `list` by one.
- **Output**: The function does not return a value; it modifies the `list` in place by removing the last node.


---
### moveListGetUciString<!-- {{#callable:moveListGetUciString}} -->
[View Source →](<../../../../../chesslib/src/chesslib/movelist.c#L92>)

Converts a `moveList` into a UCI (Universal Chess Interface) formatted string.
- **Inputs**:
    - `list`: A pointer to a `moveList` structure containing chess moves.
- **Logic and Control Flow**:
    - Check if the `list` is empty; if true, allocate a single character for the string, set it to null, and return it.
    - If the `list` contains one move, convert that move to a UCI string and return it.
    - Calculate the required string size: 5 bytes per move (4 for the move and 1 for a space), plus additional bytes for promotion characters, and allocate memory for the string.
    - Iterate over each move in the `list`, convert it to a UCI string, append it to the result string, and add a space after each move.
    - Replace the last space with a null terminator to properly end the string.
    - Return the constructed UCI string.
- **Output**: A dynamically allocated string representing the moves in UCI format, which must be freed by the caller.
- **Functions Called**:
    - [`moveGetUci`](<move.c.md#movegetuci>)


---
### moveListFree<!-- {{#callable:moveListFree}} -->
[View Source →](<../../../../../chesslib/src/chesslib/movelist.c#L141>)

Deallocates all nodes in a `moveList` and the list itself.
- **Inputs**:
    - `list`: A pointer to a `moveList` structure that contains the nodes to be freed.
- **Logic and Control Flow**:
    - Initialize `node` to the head of the list.
    - Iterate over each node in the list until `node` is NULL.
    - In each iteration, store the next node in `next`, free the current `node`, and update `node` to `next`.
    - After all nodes are freed, free the `list` itself.
- **Output**: No return value; the function frees memory associated with the `moveList` and its nodes.



---
Made with ❤️ by [Driver](https://www.driver.ai/)