<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Memory allocation functions that check results and call fatal on error.

# Purpose
This C header file, `xmalloc.h`, defines a set of memory allocation and string manipulation functions that enhance standard library functions by incorporating error checking. The functions [`xmalloc`](<#xmalloc>), [`xcalloc`](<#xcalloc>), [`xrealloc`](<#xrealloc>), [`xreallocarray`](<#xreallocarray>), and [`xrecallocarray`](<#xrecallocarray>) are designed to allocate memory and will call a fatal error handler if they encounter an error, ensuring that they never return a failure. Additionally, the file provides functions like [`xstrdup`](<#xstrdup>) and [`xstrndup`](<#xstrndup>) for duplicating strings, and formatted output functions [`xasprintf`](<#xasprintf>), [`xvasprintf`](<#xvasprintf>), [`xsnprintf`](<#xsnprintf>), and [`xvsnprintf`](<#xvsnprintf>), which include format and non-null attribute checks to ensure safe and correct usage. The header also includes a macro definition for `__bounded__` to support bounded attribute annotations, enhancing the safety and reliability of the functions.
# Function Declarations (Public API)

---
### xmalloc<!-- {{#callable_declaration:xmalloc}} -->
[View Source →](<../../xmalloc.h#L26>)

Allocates memory and checks for allocation success.
- **Description**: Use this function to allocate a specified amount of memory. It ensures that the allocation is successful by terminating the program if the allocation fails or if the requested size is zero. This function is useful in scenarios where memory allocation failure is considered a critical error and should not be handled by the caller.
- **Inputs**:
    - `size`: Specifies the number of bytes to allocate. Must be greater than zero. If zero, the function will terminate the program.
- **Output**: Returns a pointer to the allocated memory block. The program terminates if the allocation fails.
- **See Also**: [`xmalloc`](<xmalloc.c.md#xmalloc>)  (Implementation)


---
### xcalloc<!-- {{#callable_declaration:xcalloc}} -->
[View Source →](<../../xmalloc.h#L27>)

Allocates memory for an array and checks for allocation errors.
- **Description**: Use this function to allocate memory for an array of elements, ensuring that the allocation does not fail. It is important to note that if either `nmemb` or `size` is zero, the function will terminate the program with an error message. Similarly, if the memory allocation fails, the function will also terminate the program with an error message. This function is suitable for use cases where the program cannot continue without successful memory allocation.
- **Inputs**:
    - `nmemb`: The number of elements to allocate. Must be greater than zero. If zero, the function will terminate the program.
    - `size`: The size of each element to allocate. Must be greater than zero. If zero, the function will terminate the program.
- **Output**: A pointer to the allocated memory block. The program will terminate if allocation fails.
- **See Also**: [`xcalloc`](<xmalloc.c.md#xcalloc>)  (Implementation)


---
### xrealloc<!-- {{#callable_declaration:xrealloc}} -->
[View Source →](<../../xmalloc.h#L28>)

Reallocates memory to a new size.
- **Description**: Use this function to change the size of a previously allocated memory block. It is useful when you need to expand or shrink the memory block pointed to by `ptr`. The function does not return a null pointer on failure; instead, it handles errors internally. Ensure that `ptr` is a valid pointer obtained from a previous memory allocation function or is null.
- **Inputs**:
    - `ptr`: A pointer to the memory block to reallocate. It must be a valid pointer obtained from a previous allocation function or null.
    - `size`: The new size for the memory block in bytes. It must be a positive value.
- **Output**: A pointer to the reallocated memory block, which may be at a different location.
- **See Also**: [`xrealloc`](<xmalloc.c.md#xrealloc>)  (Implementation)


---
### xreallocarray<!-- {{#callable_declaration:xreallocarray}} -->
[View Source →](<../../xmalloc.h#L29>)

Reallocates memory for an array with error checking.
- **Description**: Use this function to resize an existing memory block for an array, ensuring that the operation does not fail silently. It is important to note that if either `nmemb` or `size` is zero, the function will terminate the program with an error message. Similarly, if the reallocation fails due to insufficient memory, the function will also terminate the program with an error message. This function is suitable for use cases where the program cannot continue without successfully reallocating memory.
- **Inputs**:
    - `ptr`: Pointer to the memory block to resize. Can be NULL, in which case the function behaves like `xmalloc`.
    - `nmemb`: Number of elements in the array. Must be greater than zero; otherwise, the function will terminate the program.
    - `size`: Size of each element in the array. Must be greater than zero; otherwise, the function will terminate the program.
- **Output**: Returns a pointer to the newly allocated memory block. The program will terminate if the allocation fails.
- **See Also**: [`xreallocarray`](<xmalloc.c.md#xreallocarray>)  (Implementation)


---
### xrecallocarray<!-- {{#callable_declaration:xrecallocarray}} -->
[View Source →](<../../xmalloc.h#L30>)

Reallocates and zeroes memory for an array.
- **Description**: Use this function to resize an existing memory block for an array while ensuring that any newly allocated memory is zeroed. It is useful when you need to increase or decrease the size of an array and want the new elements to be initialized to zero. This function does not return on failure; instead, it terminates the program. Ensure that the `nmemb` and `size` parameters are non-zero before calling this function.
- **Inputs**:
    - `ptr`: Pointer to the existing memory block. Can be NULL if no memory is currently allocated.
    - `oldnmemb`: Number of elements in the current memory block. Must be a valid size for the existing allocation.
    - `nmemb`: New number of elements for the memory block. Must be greater than zero.
    - `size`: Size of each element in bytes. Must be greater than zero.
- **Output**: Returns a pointer to the reallocated memory block. The program terminates if allocation fails.
- **See Also**: [`xrecallocarray`](<xmalloc.c.md#xrecallocarray>)  (Implementation)


---
### xstrdup<!-- {{#callable_declaration:xstrdup}} -->
[View Source →](<../../xmalloc.h#L31>)

Duplicates a string with error handling.
- **Description**: Use this function to create a duplicate of a given string. It allocates memory for the new string and copies the content from the input string. If memory allocation fails, the function will terminate the program with an error message. This function is useful when you need a copy of a string that is independent of the original. Ensure that the input string is valid and not null before calling this function.
- **Inputs**:
    - `str`: A pointer to a null-terminated string to duplicate. Must not be null. The caller retains ownership of the original string.
- **Output**: A pointer to the newly allocated duplicate string. The caller is responsible for freeing this memory.
- **See Also**: [`xstrdup`](<xmalloc.c.md#xstrdup>)  (Implementation)


---
### xstrndup<!-- {{#callable_declaration:xstrndup}} -->
[View Source →](<../../xmalloc.h#L32>)

Duplicates a string up to a specified maximum length.
- **Description**: Use this function to create a duplicate of a string with a limit on the number of characters copied. It is useful when you need to ensure that the copied string does not exceed a certain length. The function will terminate the program if memory allocation fails, so it is important to use it in contexts where such behavior is acceptable. This function is part of a set of memory allocation utilities that do not return on failure.
- **Inputs**:
    - `str`: The source string to duplicate. Must not be null, as the function does not handle null pointers.
    - `maxlen`: The maximum number of characters to copy from the source string, including the null terminator. Must be a valid size_t value.
- **Output**: A pointer to the newly allocated string, which is null-terminated. The caller is responsible for freeing the allocated memory.
- **See Also**: [`xstrndup`](<xmalloc.c.md#xstrndup>)  (Implementation)


---
### xasprintf<!-- {{#callable_declaration:xasprintf}} -->
[View Source →](<../../xmalloc.h#L33>)

Formats a string and allocates memory for it.
- **Description**: Use this function to format a string with a variable number of arguments and allocate memory for the resulting string. It is similar to `asprintf`, but it ensures that memory allocation does not fail by terminating the program if an error occurs. This function is useful when you need a formatted string and want to handle memory allocation automatically. Ensure that the `fmt` parameter is not null, as the function does not handle null format strings.
- **Inputs**:
    - `ret`: A pointer to a char pointer where the function will store the address of the allocated string. The caller must ensure that `ret` is not null. The function allocates memory for the string, and the caller is responsible for freeing it.
    - `fmt`: A format string that specifies how to format the subsequent arguments. It must not be null. The format string follows the same specifications as `printf`.
    - `...`: A variable number of arguments that correspond to the format specifiers in `fmt`. The types and number of these arguments must match the format specifiers.
- **Output**: Returns the number of characters in the formatted string, excluding the null terminator. If memory allocation fails, the function does not return, as it terminates the program.
- **See Also**: [`xasprintf`](<xmalloc.c.md#xasprintf>)  (Implementation)


---
### xvasprintf<!-- {{#callable_declaration:xvasprintf}} -->
[View Source →](<../../xmalloc.h#L36>)

Formats a string and allocates memory for it.
- **Description**: Use this function to format a string with variable arguments and allocate memory for the resulting string. It is similar to `vasprintf`, but it will terminate the program if memory allocation fails. This function is useful when you want to ensure that the program does not continue execution in the event of a memory allocation error. It is important to provide a valid format string and a corresponding `va_list` of arguments. The function will store the address of the allocated string in the location pointed to by the first parameter.
- **Inputs**:
    - `ret`: A pointer to a `char*` where the function will store the address of the allocated string. Must not be null.
    - `fmt`: A format string that specifies how to format the output. Must not be null.
    - `ap`: A `va_list` of arguments to format according to the format string. Must be properly initialized.
- **Output**: Returns the number of characters in the formatted string, excluding the null terminator. If memory allocation fails, the program will terminate.
- **See Also**: [`xvasprintf`](<xmalloc.c.md#xvasprintf>)  (Implementation)


---
### xsnprintf<!-- {{#callable_declaration:xsnprintf}} -->
[View Source →](<../../xmalloc.h#L39>)

Formats and stores a series of characters and values in a buffer.
- **Description**: Use this function to format a string and store it in a buffer, ensuring that the output does not exceed the specified buffer length. It is important to provide a valid format string and ensure that the buffer is large enough to hold the formatted output. This function is useful when you need to create formatted strings with variable arguments. It must be called with a valid format string and a buffer that can accommodate the resulting string, including the null terminator. The function returns the number of characters that would have been written if the buffer had been sufficiently large, not counting the terminating null character.
- **Inputs**:
    - `str`: A pointer to the buffer where the formatted string will be stored. The buffer must be large enough to hold the resulting string, including the null terminator. The caller retains ownership and must ensure the buffer is valid.
    - `len`: The maximum number of bytes to be written to the buffer, including the null terminator. Must be a positive value.
    - `fmt`: A format string that specifies how to format the subsequent arguments. Must not be null. The format string follows the same specifications as the standard `printf` function.
- **Output**: Returns the number of characters that would have been written if the buffer had been sufficiently large, not counting the terminating null character.
- **See Also**: [`xsnprintf`](<xmalloc.c.md#xsnprintf>)  (Implementation)


---
### xvsnprintf<!-- {{#callable_declaration:xvsnprintf}} -->
[View Source →](<../../xmalloc.h#L43>)

Formats a string with variable arguments into a buffer.
- **Description**: Use this function to format a string with a variable argument list and store the result in a buffer. It is important to ensure that the buffer length does not exceed `INT_MAX`, as this will cause the function to terminate the program. The function will also terminate the program if the formatted string length exceeds the buffer size. This function is useful when you need to format strings safely, as it checks for buffer overflows and handles them by terminating the program.
- **Inputs**:
    - `str`: A pointer to the buffer where the formatted string will be stored. The buffer must be large enough to hold the resulting string, including the null terminator.
    - `len`: The size of the buffer `str`. Must not exceed `INT_MAX`. If it does, the function will terminate the program.
    - `fmt`: A format string that specifies how to format the variable arguments. Must not be null.
    - `ap`: A `va_list` containing the variable arguments to format according to `fmt`. The caller must initialize this list before passing it to the function.
- **Output**: Returns the number of characters written, excluding the null terminator. If the return value is negative or greater than or equal to `len`, the function will terminate the program.
- **See Also**: [`xvsnprintf`](<xmalloc.c.md#xvsnprintf>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)