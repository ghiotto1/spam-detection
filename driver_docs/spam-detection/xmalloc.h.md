<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Memory allocation functions that check results and call fatal on error.

# Purpose
The code is a C header file that declares a set of memory management and string manipulation functions. These functions, such as [`xmalloc`](<#xmalloc>), [`xcalloc`](<#xcalloc>), [`xrealloc`](<#xrealloc>), and [`xstrdup`](<#xstrdup>), are designed to handle memory allocation and reallocation while checking for errors. If an error occurs, these functions call a fatal error handler instead of returning failure. The file also includes functions for formatted string operations like [`xasprintf`](<#xasprintf>) and [`xsnprintf`](<#xsnprintf>), which ensure safe and error-checked string formatting. The header uses preprocessor directives to prevent multiple inclusions and defines a macro `__bounded__` for compatibility with certain compilers.
# Function Declarations (Public API)

---
### xmalloc<!-- {{#callable_declaration:xmalloc}} -->
[View Source →](<../../xmalloc.h#L26>)

Allocates memory and terminates the program on failure.
- **Description**: Use this function to allocate a specified amount of memory. It ensures that the allocation is successful by terminating the program if the allocation fails or if the requested size is zero. This function is useful in scenarios where memory allocation failure is considered critical and should not be handled by the caller. It is important to note that this function does not return a null pointer; instead, it guarantees that a valid memory block is returned or the program is terminated.
- **Inputs**:
    - `size`: Specifies the number of bytes to allocate. Must be greater than zero. If zero is provided, the program will terminate.
- **Output**: Returns a pointer to the allocated memory block. The program terminates if allocation fails.
- **See Also**: [`xmalloc`](<xmalloc.c.md#xmalloc>)  (Implementation)


---
### xcalloc<!-- {{#callable_declaration:xcalloc}} -->
[View Source →](<../../xmalloc.h#L27>)

Allocates memory for an array and checks for allocation errors.
- **Description**: Use this function to allocate memory for an array with a specified number of elements and element size. It ensures that the allocation is successful by terminating the program if the allocation fails or if either dimension is zero. This function is useful when you want to ensure that memory allocation errors are handled immediately and do not propagate through the program.
- **Inputs**:
    - `nmemb`: The number of elements to allocate. Must be greater than zero. If zero, the function will terminate the program.
    - `size`: The size of each element in bytes. Must be greater than zero. If zero, the function will terminate the program.
- **Output**: A pointer to the allocated memory block. The program terminates if allocation fails.
- **See Also**: [`xcalloc`](<xmalloc.c.md#xcalloc>)  (Implementation)


---
### xrealloc<!-- {{#callable_declaration:xrealloc}} -->
[View Source →](<../../xmalloc.h#L28>)

Reallocates memory to a new size.
- **Description**: Use this function to change the size of a previously allocated memory block. It is important to note that this function will not return a null pointer on failure; instead, it will terminate the program. This behavior ensures that the caller does not need to check for null pointers after calling this function. It is suitable for use in environments where memory allocation failures are considered fatal and should be handled by terminating the program.
- **Inputs**:
    - `ptr`: A pointer to the memory block to reallocate. This pointer must have been returned by a previous call to a memory allocation function like `xmalloc`, `xcalloc`, or `xrealloc`. It can be null, in which case the function behaves like `xmalloc`.
    - `size`: The new size for the memory block in bytes. Must be greater than zero. If the size is zero, the behavior is undefined.
- **Output**: A pointer to the reallocated memory block, which is guaranteed to be non-null.
- **See Also**: [`xrealloc`](<xmalloc.c.md#xrealloc>)  (Implementation)


---
### xreallocarray<!-- {{#callable_declaration:xreallocarray}} -->
[View Source →](<../../xmalloc.h#L29>)

Reallocates memory for an array with error checking.
- **Description**: Use this function to resize an existing memory block for an array, ensuring that the operation does not fail silently. It is important to note that if either `nmemb` or `size` is zero, the function will terminate the program with an error message. Similarly, if the reallocation fails due to insufficient memory, the function will also terminate the program. This function is suitable for applications where memory allocation failures must be handled by terminating the program rather than returning an error code.
- **Inputs**:
    - `ptr`: Pointer to the previously allocated memory block. If this is NULL, the function behaves like `xmalloc` for a new allocation.
    - `nmemb`: Number of elements in the array. Must be greater than zero; otherwise, the function will terminate the program.
    - `size`: Size of each element in the array. Must be greater than zero; otherwise, the function will terminate the program.
- **Output**: Returns a pointer to the newly allocated memory block. The program terminates if the allocation fails.
- **See Also**: [`xreallocarray`](<xmalloc.c.md#xreallocarray>)  (Implementation)


---
### xrecallocarray<!-- {{#callable_declaration:xrecallocarray}} -->
[View Source →](<../../xmalloc.h#L30>)

Reallocates memory for an array with error checking.
- **Description**: Use this function to resize an existing memory block for an array, ensuring that the operation does not fail silently. It is suitable when you need to change the number of elements or the size of each element in an array. The function will terminate the program if the allocation fails or if either the number of elements or the size of each element is zero. This behavior ensures that the caller does not need to handle memory allocation errors.
- **Inputs**:
    - `ptr`: Pointer to the existing memory block to resize. Can be NULL if no existing memory block is present.
    - `oldnmemb`: Number of elements in the existing memory block. Must be a valid size_t value.
    - `nmemb`: New number of elements for the memory block. Must be greater than zero.
    - `size`: Size of each element in bytes. Must be greater than zero.
- **Output**: Returns a pointer to the newly allocated memory block. The program terminates if allocation fails.
- **See Also**: [`xrecallocarray`](<xmalloc.c.md#xrecallocarray>)  (Implementation)


---
### xstrdup<!-- {{#callable_declaration:xstrdup}} -->
[View Source →](<../../xmalloc.h#L31>)

Duplicates a string with error handling.
- **Description**: Use this function to create a duplicate of a given string. It allocates memory for the new string and copies the content from the input string. If memory allocation fails, the function will terminate the program with an error message. This function is useful when you need a guaranteed successful string duplication without handling memory allocation errors manually.
- **Inputs**:
    - `str`: A pointer to a null-terminated string to duplicate. Must not be null. The caller retains ownership of the original string.
- **Output**: Returns a pointer to the newly allocated duplicate string. The caller is responsible for freeing this memory.
- **See Also**: [`xstrdup`](<xmalloc.c.md#xstrdup>)  (Implementation)


---
### xstrndup<!-- {{#callable_declaration:xstrndup}} -->
[View Source →](<../../xmalloc.h#L32>)

Duplicates a string up to a specified maximum length, ensuring memory allocation success.
- **Description**: Use this function to create a duplicate of a string with a specified maximum length. It ensures that memory allocation is successful by terminating the program if allocation fails. This function is useful when you need a copy of a string but want to limit the number of characters copied. It is important to note that the function will not return if memory allocation fails, as it calls a fatal error handler in such cases.
- **Inputs**:
    - `str`: The source string to duplicate. Must not be null, as the function does not handle null pointers.
    - `maxlen`: The maximum number of characters to duplicate from the source string. Must be a non-negative value.
- **Output**: Returns a pointer to the newly allocated string, which is a duplicate of the source string up to the specified maximum length.
- **See Also**: [`xstrndup`](<xmalloc.c.md#xstrndup>)  (Implementation)


---
### xasprintf<!-- {{#callable_declaration:xasprintf}} -->
[View Source →](<../../xmalloc.h#L33>)

Formats a string and allocates memory for it.
- **Description**: Use this function to format a string according to a specified format and store the result in a newly allocated memory block. It is similar to `asprintf`, but it never returns a failure. Instead, it calls a fatal error handler if memory allocation fails. This function is useful when you need a formatted string and want to ensure that memory allocation errors are handled automatically. Ensure that the format string is valid and that the function is called with the correct number of arguments corresponding to the format specifiers.
- **Inputs**:
    - `ret`: A pointer to a char pointer where the address of the newly allocated string will be stored. Must not be null. The caller is responsible for freeing the allocated memory.
    - `fmt`: A format string that specifies how to format the output. Must not be null. It follows the same specifications as the format string in `printf`.
- **Output**: Returns the number of characters printed, excluding the null byte used to end output to strings.
- **See Also**: [`xasprintf`](<xmalloc.c.md#xasprintf>)  (Implementation)


---
### xvasprintf<!-- {{#callable_declaration:xvasprintf}} -->
[View Source →](<../../xmalloc.h#L36>)

Formats a string and allocates memory for it, ensuring no failure occurs.
- **Description**: Use this function to format a string with variable arguments and allocate memory for the resulting string. It is similar to `vasprintf`, but it ensures that the operation does not fail by terminating the program if memory allocation fails. This function is useful when you want to safely format strings without handling memory allocation errors. Ensure that the format string is valid and that the function is called with a valid `va_list`.
- **Inputs**:
    - `ret`: A pointer to a char pointer where the function will store the address of the allocated string. Must not be null. The caller is responsible for freeing the allocated memory.
    - `fmt`: A format string that specifies how to format the output. Must not be null.
    - `ap`: A `va_list` containing the variable arguments to format according to `fmt`. Must be properly initialized before calling.
- **Output**: Returns the number of characters printed (excluding the null byte used to end output to strings). If memory allocation fails, the program will terminate.
- **See Also**: [`xvasprintf`](<xmalloc.c.md#xvasprintf>)  (Implementation)


---
### xsnprintf<!-- {{#callable_declaration:xsnprintf}} -->
[View Source →](<../../xmalloc.h#L39>)

Formats and stores a string in a buffer with size checking.
- **Description**: Use this function to format a string according to a specified format and store it in a provided buffer. It is important to ensure that the buffer is large enough to hold the resulting string, including the null terminator. The function will not write more than the specified number of bytes to the buffer, preventing buffer overflow. This function must be used with a valid format string and a corresponding list of arguments. It is essential to check the return value to determine if the output was truncated.
- **Inputs**:
    - `str`: A pointer to the buffer where the formatted string will be stored. Must not be null, and the caller retains ownership.
    - `len`: The maximum number of bytes to write to the buffer, including the null terminator. Must be greater than zero.
    - `fmt`: A format string that specifies how to format the subsequent arguments. Must not be null.
    - `...`: A variable number of arguments that correspond to the format specifiers in the format string.
- **Output**: Returns the number of characters that would have been written if the buffer had been large enough, not counting the null terminator. If the return value is greater than or equal to 'len', the output was truncated.
- **See Also**: [`xsnprintf`](<xmalloc.c.md#xsnprintf>)  (Implementation)


---
### xvsnprintf<!-- {{#callable_declaration:xvsnprintf}} -->
[View Source →](<../../xmalloc.h#L43>)

Formats a string into a buffer using a variable argument list.
- **Description**: Use this function to format a string into a buffer with a specified maximum length, using a variable argument list. It is important to ensure that the `len` parameter does not exceed `INT_MAX`, as this will cause the function to terminate the program. The function will also terminate the program if the formatted string length is greater than or equal to `len`. This function is useful when you need to safely format strings with dynamic content, ensuring that buffer overflows do not occur.
- **Inputs**:
    - `str`: A pointer to the buffer where the formatted string will be stored. The buffer must be large enough to hold the formatted string and the null terminator. The caller retains ownership.
    - `len`: The maximum number of bytes to write to the buffer, including the null terminator. Must not exceed `INT_MAX`. If `len` is greater than `INT_MAX`, the function will terminate the program.
    - `fmt`: A format string that specifies how to format the variable arguments. Must not be null.
    - `ap`: A `va_list` containing the variable arguments to format according to `fmt`. The caller is responsible for initializing and cleaning up the `va_list`.
- **Output**: Returns the number of characters that would have been written if `len` had been sufficiently large, not counting the terminating null character. If the return value is negative or greater than or equal to `len`, the function will terminate the program.
- **See Also**: [`xvsnprintf`](<xmalloc.c.md#xvsnprintf>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)