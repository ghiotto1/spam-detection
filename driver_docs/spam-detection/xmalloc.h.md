<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Memory allocation functions that check results and call fatal on error.

# Purpose
This code is a C header file that declares a set of memory management and string manipulation functions. These functions, such as [`xmalloc`](<#xmalloc>), [`xcalloc`](<#xcalloc>), [`xrealloc`](<#xrealloc>), and [`xstrdup`](<#xstrdup>), are designed to handle memory allocation and reallocation while ensuring that errors are managed by calling a fatal error handler instead of returning failure. The header also includes functions like [`xasprintf`](<#xasprintf>) and [`xvasprintf`](<#xvasprintf>) for formatted string creation, which are marked with attributes to ensure proper usage and error checking. The file uses preprocessor directives to prevent multiple inclusions and defines a macro `__bounded__` for compatibility with systems that do not support it.
# Function Declarations (Public API)

---
### xmalloc<!-- {{#callable_declaration:xmalloc}} -->
[View Source →](<../../xmalloc.h#L26>)

Allocates memory and checks for allocation success.
- **Description**: Use this function to allocate a specified amount of memory. It ensures that the allocation is successful by terminating the program if the allocation fails or if the requested size is zero. This function is useful in scenarios where memory allocation failure is considered a critical error and should not be handled by the caller.
- **Inputs**:
    - `size`: Specifies the number of bytes to allocate. Must be greater than zero. If zero, the function will terminate the program.
- **Output**: Returns a pointer to the allocated memory block. The program terminates if allocation fails.
- **See Also**: [`xmalloc`](<xmalloc.c.md#xmalloc>)  (Implementation)


---
### xcalloc<!-- {{#callable_declaration:xcalloc}} -->
[View Source →](<../../xmalloc.h#L27>)

Allocates memory for an array and checks for allocation errors.
- **Description**: Use this function to allocate memory for an array of elements, where each element has a specified size. It ensures that the allocation is successful by terminating the program if the allocation fails or if either dimension is zero. This function is useful when you want to ensure that memory allocation errors are handled immediately and do not propagate through the program.
- **Inputs**:
    - `nmemb`: The number of elements to allocate. Must be greater than zero. If zero, the function will terminate the program.
    - `size`: The size of each element in bytes. Must be greater than zero. If zero, the function will terminate the program.
- **Output**: A pointer to the allocated memory block. The program terminates if allocation fails.
- **See Also**: [`xcalloc`](<xmalloc.c.md#xcalloc>)  (Implementation)


---
### xrealloc<!-- {{#callable_declaration:xrealloc}} -->
[View Source →](<../../xmalloc.h#L28>)

Reallocates memory to a new size.
- **Description**: Use this function to change the size of a previously allocated memory block. It reallocates the memory pointed to by the given pointer to the specified size. This function does not return on failure; instead, it terminates the program. It is important to ensure that the pointer provided is valid and was previously allocated by a compatible memory allocation function.
- **Inputs**:
    - `ptr`: A pointer to the memory block to reallocate. Must be a valid pointer obtained from a compatible memory allocation function or NULL.
    - `size`: The new size for the memory block in bytes. Must be greater than zero.
- **Output**: A pointer to the reallocated memory block. The program terminates if reallocation fails.
- **See Also**: [`xrealloc`](<xmalloc.c.md#xrealloc>)  (Implementation)


---
### xreallocarray<!-- {{#callable_declaration:xreallocarray}} -->
[View Source →](<../../xmalloc.h#L29>)

Reallocates memory for an array with error checking.
- **Description**: Use this function to resize an existing memory block for an array, ensuring that the operation does not fail silently. It is suitable when you need to change the size of an array and want to handle errors by terminating the program if memory allocation fails. This function checks if either the number of elements or the size of each element is zero and will terminate the program in such cases. It also terminates the program if the reallocation fails due to insufficient memory.
- **Inputs**:
    - `ptr`: Pointer to the memory block to resize. Can be NULL, in which case it behaves like `malloc`.
    - `nmemb`: Number of elements in the array. Must be greater than zero; otherwise, the program will terminate.
    - `size`: Size of each element in bytes. Must be greater than zero; otherwise, the program will terminate.
- **Output**: Returns a pointer to the newly allocated memory block. The program terminates if allocation fails.
- **See Also**: [`xreallocarray`](<xmalloc.c.md#xreallocarray>)  (Implementation)


---
### xrecallocarray<!-- {{#callable_declaration:xrecallocarray}} -->
[View Source →](<../../xmalloc.h#L30>)

Reallocates memory for an array with error checking.
- **Description**: Use this function to resize an existing memory block for an array, ensuring that the operation does not fail silently. It is suitable when you need to change the number of elements or the size of each element in an array. The function will terminate the program if the allocation fails or if either the number of elements or the size of each element is zero. This behavior ensures that the program does not continue with an invalid memory state.
- **Inputs**:
    - `ptr`: Pointer to the current memory block. Can be NULL if no memory is currently allocated.
    - `oldnmemb`: Number of elements in the current memory block. Must be a valid size_t value.
    - `nmemb`: New number of elements for the memory block. Must be greater than zero.
    - `size`: Size of each element in bytes. Must be greater than zero.
- **Output**: Returns a pointer to the newly allocated memory block. The program terminates if allocation fails.
- **See Also**: [`xrecallocarray`](<xmalloc.c.md#xrecallocarray>)  (Implementation)


---
### xstrdup<!-- {{#callable_declaration:xstrdup}} -->
[View Source →](<../../xmalloc.h#L31>)

Duplicates a string with error handling.
- **Description**: Use this function to create a duplicate of a given string. It allocates memory for the new string and copies the content from the input string. If memory allocation fails, the function will terminate the program. This function is useful when you need a guaranteed successful string duplication without handling memory allocation errors manually.
- **Inputs**:
    - `str`: A pointer to a null-terminated string to duplicate. Must not be null. The caller retains ownership of the original string.
- **Output**: A pointer to the newly allocated duplicate string. The caller is responsible for freeing this memory.
- **See Also**: [`xstrdup`](<xmalloc.c.md#xstrdup>)  (Implementation)


---
### xstrndup<!-- {{#callable_declaration:xstrndup}} -->
[View Source →](<../../xmalloc.h#L32>)

Duplicates a string up to a specified maximum length.
- **Description**: Use this function to create a duplicate of a string, but only up to a specified number of characters. It is useful when you need to ensure that the copied string does not exceed a certain length. The function will terminate the program if memory allocation fails, so it is guaranteed to return a valid pointer or not return at all. This behavior makes it suitable for use in environments where failure to allocate memory is considered a critical error.
- **Inputs**:
    - `str`: The source string to duplicate. Must not be null. The caller retains ownership of the original string.
    - `maxlen`: The maximum number of characters to duplicate from the source string. Must be a non-negative value.
- **Output**: Returns a pointer to the newly allocated string, which is a duplicate of the source string up to the specified length. The caller is responsible for freeing the returned string.
- **See Also**: [`xstrndup`](<xmalloc.c.md#xstrndup>)  (Implementation)


---
### xasprintf<!-- {{#callable_declaration:xasprintf}} -->
[View Source →](<../../xmalloc.h#L33>)

Formats a string and allocates memory for it.
- **Description**: Use this function to format a string according to a specified format and store the result in a newly allocated memory buffer. It is similar to `asprintf`, but it guarantees that memory allocation will not fail. The function writes the formatted string to a buffer, which it allocates and assigns to the pointer provided by the caller. The caller is responsible for freeing this memory when it is no longer needed. This function must be called with a valid format string and a pointer to a `char*` that will receive the address of the allocated buffer.
- **Inputs**:
    - `ret`: A pointer to a `char*` where the address of the allocated buffer will be stored. Must not be null. The caller is responsible for freeing the allocated memory.
    - `fmt`: A format string that specifies how to format the output. Must not be null. The format string follows the same specifications as `printf`.
- **Output**: Returns the number of characters printed, excluding the null byte used to end output to strings.
- **See Also**: [`xasprintf`](<xmalloc.c.md#xasprintf>)  (Implementation)


---
### xvasprintf<!-- {{#callable_declaration:xvasprintf}} -->
[View Source →](<../../xmalloc.h#L36>)

Formats a string and allocates memory for it.
- **Description**: Use this function to format a string with variable arguments and allocate memory for the resulting string. It is similar to `vasprintf`, but it will terminate the program if memory allocation fails. This function is useful when you want to ensure that the program does not continue execution in case of a memory allocation error. The function must be called with a valid format string and a `va_list` of arguments.
- **Inputs**:
    - `ret`: A pointer to a `char*` where the function will store the address of the allocated string. Must not be null. The caller is responsible for freeing the allocated memory.
    - `fmt`: A format string that specifies how to format the output. Must not be null.
    - `ap`: A `va_list` of arguments to format according to the format string. Must be properly initialized before calling this function.
- **Output**: Returns the number of characters printed (excluding the null byte used to end output to strings). If memory allocation fails, the function will terminate the program.
- **See Also**: [`xvasprintf`](<xmalloc.c.md#xvasprintf>)  (Implementation)


---
### xsnprintf<!-- {{#callable_declaration:xsnprintf}} -->
[View Source →](<../../xmalloc.h#L39>)

Formats and stores a series of characters and values in a buffer.
- **Description**: Use this function to format a string and store it in a buffer, similar to `snprintf`, but with additional safety checks. It requires a format string and a variable number of arguments to format. The function ensures that the formatted string does not exceed the specified buffer length, preventing buffer overflows. It is important to provide a valid format string and ensure the buffer is large enough to hold the formatted output. The function must be called with a valid format string and a buffer that can accommodate the formatted data.
- **Inputs**:
    - `str`: A pointer to the buffer where the formatted string will be stored. The buffer must be large enough to hold the resulting string, including the null terminator.
    - `len`: The maximum number of bytes to write to the buffer, including the null terminator. Must be a positive value.
    - `fmt`: A format string that specifies how to format the subsequent arguments. Must not be null.
- **Output**: Returns the number of characters that would have been written if the buffer had been large enough, not counting the null terminator. If the return value is greater than or equal to `len`, the output was truncated.
- **See Also**: [`xsnprintf`](<xmalloc.c.md#xsnprintf>)  (Implementation)


---
### xvsnprintf<!-- {{#callable_declaration:xvsnprintf}} -->
[View Source →](<../../xmalloc.h#L43>)

Formats a string into a buffer using a variable argument list.
- **Description**: Use this function to format a string into a buffer with a specified maximum length, using a format string and a variable argument list. It is important to ensure that the buffer length does not exceed `INT_MAX`, as this will cause the function to terminate the program. The function will also terminate the program if the formatted string length exceeds the buffer length. This function is useful when you need to safely format strings with variable arguments, ensuring that buffer overflows do not occur.
- **Inputs**:
    - `str`: A pointer to the buffer where the formatted string will be stored. The buffer must be large enough to hold the formatted string and the null terminator. The caller retains ownership and must ensure it is not null.
    - `len`: The maximum number of bytes to write to the buffer, including the null terminator. Must not exceed `INT_MAX`. If it does, the function will terminate the program.
    - `fmt`: A format string that specifies how to format the variable arguments. Must not be null. The format string follows the same specifications as `printf`.
    - `ap`: A `va_list` containing the variable arguments to format according to the format string. The caller is responsible for initializing and managing the `va_list`.
- **Output**: Returns the number of characters that would have been written if the buffer had been sufficiently large, not counting the terminating null character. If the return value is negative or greater than or equal to `len`, the function will terminate the program.
- **See Also**: [`xvsnprintf`](<xmalloc.c.md#xvsnprintf>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)