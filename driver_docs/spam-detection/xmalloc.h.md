<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

Memory allocation functions that check results and call fatal on error.

# Purpose
This code is a C header file that declares a set of memory allocation and string manipulation functions with enhanced error checking. The functions [`xmalloc`](<#xmalloc>), [`xcalloc`](<#xcalloc>), [`xrealloc`](<#xrealloc>), [`xreallocarray`](<#xreallocarray>), and [`xrecallocarray`](<#xrecallocarray>) are designed to allocate memory and will call a fatal error handler if they encounter an error, ensuring that they never return a failure. The functions [`xstrdup`](<#xstrdup>) and [`xstrndup`](<#xstrndup>) are used for duplicating strings, while [`xasprintf`](<#xasprintf>) and [`xvasprintf`](<#xvasprintf>) are used for formatted string allocation, with error checking attributes to ensure correct usage. Additionally, [`xsnprintf`](<#xsnprintf>) and [`xvsnprintf`](<#xvsnprintf>) provide safe formatted output to strings, with attributes to enforce format compliance and buffer bounds. This header file is intended to replace standard memory and string functions with safer alternatives that handle errors more robustly.
# Function Declarations (Public API)

---
### xmalloc<!-- {{#callable_declaration:xmalloc}} -->
[View Source →](<../../xmalloc.h#L26>)

Allocates memory and checks for allocation success.
- **Description**: Use this function to allocate a specified amount of memory. It ensures that the allocation is successful by terminating the program if the allocation fails or if the requested size is zero. This function is useful in scenarios where memory allocation failure is considered a critical error and should not be handled by the caller.
- **Inputs**:
    - `size`: Specifies the number of bytes to allocate. Must be greater than zero. If zero, the function will terminate the program.
- **Output**: Returns a pointer to the allocated memory block. The program terminates if allocation fails.
- **See Also**: [`xmalloc`](<xmalloc.c.md#xmalloc>)  (Implementation)


---
### xcalloc<!-- {{#callable_declaration:xcalloc}} -->
[View Source →](<../../xmalloc.h#L27>)

Allocates memory for an array and checks for allocation errors.
- **Description**: Use this function to allocate memory for an array of elements, where each element has a specified size. It ensures that the allocation is successful by terminating the program if the allocation fails or if either dimension is zero. This function is useful when you want to ensure that memory allocation errors are handled immediately and do not propagate through the program.
- **Inputs**:
    - `nmemb`: The number of elements to allocate. Must be greater than zero. If zero, the function will terminate the program.
    - `size`: The size of each element in bytes. Must be greater than zero. If zero, the function will terminate the program.
- **Output**: A pointer to the allocated memory block. The program terminates if allocation fails.
- **See Also**: [`xcalloc`](<xmalloc.c.md#xcalloc>)  (Implementation)


---
### xrealloc<!-- {{#callable_declaration:xrealloc}} -->
[View Source →](<../../xmalloc.h#L28>)

Reallocates memory to a new size.
- **Description**: Use this function to change the size of a previously allocated memory block. It reallocates the memory pointed to by the given pointer to the specified size. This function does not return on failure; instead, it terminates the program. It is important to ensure that the pointer provided is valid and was previously allocated by a compatible memory allocation function.
- **Inputs**:
    - `ptr`: A pointer to the memory block to reallocate. Must be a valid pointer obtained from a compatible memory allocation function. If null, the function behaves like `xmalloc`.
    - `size`: The new size for the memory block in bytes. Must be a non-zero value.
- **Output**: A pointer to the reallocated memory block, which may be at a different location.
- **See Also**: [`xrealloc`](<xmalloc.c.md#xrealloc>)  (Implementation)


---
### xreallocarray<!-- {{#callable_declaration:xreallocarray}} -->
[View Source →](<../../xmalloc.h#L29>)

Reallocates memory for an array with error checking.
- **Description**: Use this function to resize an existing memory block for an array, ensuring that the operation does not fail silently. It is important to note that if either `nmemb` or `size` is zero, the function will terminate the program with an error message. Similarly, if the reallocation fails due to insufficient memory, the function will also terminate the program. This function is suitable for applications where memory allocation failures must be handled by terminating the program rather than returning an error code.
- **Inputs**:
    - `ptr`: Pointer to the memory block to resize. Can be NULL, in which case the function behaves like `xmalloc`.
    - `nmemb`: Number of elements in the array. Must be greater than zero; otherwise, the function will terminate the program.
    - `size`: Size of each element in the array. Must be greater than zero; otherwise, the function will terminate the program.
- **Output**: Returns a pointer to the newly allocated memory block. The program terminates if the allocation fails.
- **See Also**: [`xreallocarray`](<xmalloc.c.md#xreallocarray>)  (Implementation)


---
### xrecallocarray<!-- {{#callable_declaration:xrecallocarray}} -->
[View Source →](<../../xmalloc.h#L30>)

Reallocates and zeroes memory for an array.
- **Description**: Use this function to resize an existing memory block for an array while ensuring that any newly allocated memory is zeroed. It is useful when you need to increase or decrease the size of an array and want to initialize new elements to zero. This function does not return on failure; instead, it terminates the program. Ensure that `nmemb` and `size` are non-zero before calling this function.
- **Inputs**:
    - `ptr`: Pointer to the existing memory block. Can be NULL if no memory is currently allocated.
    - `oldnmemb`: Number of elements in the current memory block. Must be a valid size_t value.
    - `nmemb`: New number of elements for the memory block. Must be greater than zero.
    - `size`: Size of each element in bytes. Must be greater than zero.
- **Output**: Returns a pointer to the reallocated memory block. The program terminates if allocation fails.
- **See Also**: [`xrecallocarray`](<xmalloc.c.md#xrecallocarray>)  (Implementation)


---
### xstrdup<!-- {{#callable_declaration:xstrdup}} -->
[View Source →](<../../xmalloc.h#L31>)

Duplicates a string with error handling.
- **Description**: Use this function to create a duplicate of a given string. It allocates memory for the new string and copies the content from the input string. If memory allocation fails, the function will terminate the program. This function is useful when you need a copy of a string that is independent of the original. Ensure that the input string is valid and not null before calling this function.
- **Inputs**:
    - `str`: A pointer to a null-terminated string to duplicate. Must not be null. The caller retains ownership of the original string.
- **Output**: Returns a pointer to the newly allocated duplicate string. The caller is responsible for freeing this memory.
- **See Also**: [`xstrdup`](<xmalloc.c.md#xstrdup>)  (Implementation)


---
### xstrndup<!-- {{#callable_declaration:xstrndup}} -->
[View Source →](<../../xmalloc.h#L32>)

Duplicates a string up to a specified maximum length.
- **Description**: Use this function to create a duplicate of a string, but limit the duplication to a specified maximum number of characters. This function is useful when you need to ensure that the duplicated string does not exceed a certain length. It is important to note that this function will not return a null pointer; instead, it will terminate the program if memory allocation fails. This behavior ensures that the caller does not need to check for null pointers, but it also means that the function should be used in contexts where such termination is acceptable.
- **Inputs**:
    - `str`: The input string to duplicate. Must not be null. The caller retains ownership of the original string.
    - `maxlen`: The maximum number of characters to duplicate from the input string. Must be a non-negative value.
- **Output**: Returns a pointer to the newly allocated string containing up to 'maxlen' characters from the input string, plus a null terminator. The caller is responsible for freeing the allocated memory.
- **See Also**: [`xstrndup`](<xmalloc.c.md#xstrndup>)  (Implementation)


---
### xasprintf<!-- {{#callable_declaration:xasprintf}} -->
[View Source →](<../../xmalloc.h#L33>)

Formats a string and allocates memory for it.
- **Description**: Use this function to format a string according to a specified format and store the result in a newly allocated memory buffer. It is useful when you need a formatted string but do not know the required buffer size in advance. The function allocates memory for the resulting string and assigns the pointer to the provided location. It never returns a failure; instead, it calls a fatal error handler if memory allocation fails. Ensure that the format string is valid and that the function is called with the correct number of arguments corresponding to the format specifiers.
- **Inputs**:
    - `ret`: A pointer to a char pointer where the function will store the address of the newly allocated string. Must not be null. The caller is responsible for freeing the allocated memory.
    - `fmt`: A format string that specifies how to format the subsequent arguments. Must not be null and must be a valid format string.
- **Output**: Returns the number of characters in the formatted string, excluding the null terminator.
- **See Also**: [`xasprintf`](<xmalloc.c.md#xasprintf>)  (Implementation)


---
### xvasprintf<!-- {{#callable_declaration:xvasprintf}} -->
[View Source →](<../../xmalloc.h#L36>)

Formats a string and allocates memory for it, handling errors fatally.
- **Description**: Use this function to format a string with variable arguments and allocate memory for the resulting string. It is similar to `vasprintf`, but it terminates the program if memory allocation fails. This function is useful when you want to ensure that memory allocation errors do not go unnoticed and need to be handled immediately. It must be called with a valid format string and a `va_list` of arguments. The caller is responsible for freeing the allocated memory.
- **Inputs**:
    - `ret`: A pointer to a `char*` where the function will store the address of the allocated string. Must not be null. The caller is responsible for freeing the allocated memory.
    - `fmt`: A format string that specifies how to format the output. Must not be null. It follows the same specifications as the format string in `printf`.
    - `ap`: A `va_list` of arguments that correspond to the format specifiers in `fmt`. It must be initialized before calling this function.
- **Output**: Returns the number of characters printed (excluding the null byte used to end output to strings) or terminates the program if memory allocation fails.
- **See Also**: [`xvasprintf`](<xmalloc.c.md#xvasprintf>)  (Implementation)


---
### xsnprintf<!-- {{#callable_declaration:xsnprintf}} -->
[View Source →](<../../xmalloc.h#L39>)

Formats a string and stores it in a buffer.
- **Description**: Use this function to format a string according to a specified format and store the result in a provided buffer. It is important to ensure that the buffer is large enough to hold the formatted string, including the null terminator. The function uses a variable argument list to allow for flexible input, similar to `printf`. It is crucial to provide a valid format string, as the function does not perform format validation. The function returns the number of characters that would have been written if the buffer had been sufficiently large, not counting the null terminator. This function must be used with care to avoid buffer overflows.
- **Inputs**:
    - `str`: A pointer to the buffer where the formatted string will be stored. The buffer must be large enough to hold the resulting string, including the null terminator. The caller retains ownership and must ensure the buffer is valid.
    - `len`: The size of the buffer pointed to by `str`. It must be large enough to store the formatted string and the null terminator. If the buffer is too small, the output will be truncated.
    - `fmt`: A format string that specifies how to format the input data. It must not be null, and it should follow the same rules as the format string in `printf`.
    - `...`: A variable number of arguments that correspond to the format specifiers in `fmt`. The types and number of arguments must match the format specifiers.
- **Output**: Returns the number of characters that would have been written if the buffer had been sufficiently large, excluding the null terminator. If the return value is greater than or equal to `len`, the output was truncated.
- **See Also**: [`xsnprintf`](<xmalloc.c.md#xsnprintf>)  (Implementation)


---
### xvsnprintf<!-- {{#callable_declaration:xvsnprintf}} -->
[View Source →](<../../xmalloc.h#L43>)

Formats a string with variable arguments into a buffer.
- **Description**: Use this function to format a string with a variable argument list and store the result in a buffer. It is important to ensure that the buffer length does not exceed `INT_MAX`, as this will cause the function to terminate the program. The function will also terminate the program if the formatted string length is greater than or equal to the buffer length, preventing buffer overflow. This function is useful when you need to format strings safely with a variable argument list, ensuring that the buffer is not overrun.
- **Inputs**:
    - `str`: A pointer to the buffer where the formatted string will be stored. The buffer must be large enough to hold the resulting string, including the null terminator.
    - `len`: The size of the buffer `str`. Must not exceed `INT_MAX`. If the size is greater than or equal to the formatted string length, the function will terminate the program.
    - `fmt`: A format string that specifies how to format the variable arguments. Must not be null.
    - `ap`: A `va_list` containing the variable arguments to format according to `fmt`. The caller must initialize this list before passing it to the function.
- **Output**: Returns the number of characters written, excluding the null terminator. If the function encounters an error, it will terminate the program.
- **See Also**: [`xvsnprintf`](<xmalloc.c.md#xvsnprintf>)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)